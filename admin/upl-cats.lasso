<?LassoScript //>Variable:'fromMetoRoot' = '../';Include:'../config.lasso';Include:'../gen/session.inc';Library:'../inc/library.inc';Variable:'myStylesheet' = 'admin.css';Variable:'myInc' = 'inc/';Variable:'myImages' = 'images/';// init the basic options datatypeVariable:'basicOptions' = LB_basicOptions;Variable:'menu'  = $fromMetoRoot + $myInc + 'adminmenu.lasso';Variable:'footer'= $fromMetoRoot + $myInc + 'adminfooter.inc';// some values here override those in config.lassoVariable:'contents'= $fromMetoRoot + 'gen/adminpage_monster.inc';If: $lang == 'fi';Variable:'page_title'='Tiedostokategoriat';Else;Variable:'page_title'='File Categories';/If;Variable:'pageSecuritylevel' = (Integer:(LB_GetOption:'fileupload_minlevel')); Variable:'rectype_en' = 'file category';Variable:'rectype_en_part' = 'file categories';Variable:'rectype_fi' = 'tiedostokategoria';Variable:'rectype_fi_part' = 'tiedostokategorioita';Variable:'myTable'='uploadcats';Variable:'viewtype' = 'listview'; // formview, listviewVariable:'maxrecords_formview' = 1;   Variable:'maxrecords_listview' = 25;   Variable:'dbtype' = 'mysql';   // fmp, mysql (vaikuttaa pvm-k‰sittelyynVariable:'updatebehavior' = 1;   // 1 or 2 (see below)// behavior #1: search kept, updated rec shown only if search allows this// 		(keyvalue nulled after update)//		(good for listview)// behavior #2: search bypassed, only updated rec shown// 		(keyvalue kept, hakulomake emptied)//		(sopii formview-n‰kym‰‰n)Variable:'searchBehavior' = 1;   // 1 or 2 (see below)// searchBehavior #1: if searchform is empty, then find all// searchBehavior #2: if searchform is empty, then find nothingVariable:'action' = '';Variable:'speakBubble' = '';Variable:'keyvalue'=(Action_Param:'keyvalue');Variable:'skip'=(Action_Param:'skip');Variable:'haku'=(Action_Param:'haku');Variable:'size1default'='50'; // default (text: size, textarea: cols)Variable:'size2default'='4';  // default (textarea: rows)Variable:'publicPage'=''; // don't comment outVariable:'defaultClass'='pieni'; // normaalisti "pieni" // for how to use $searchFields and $editFields, see the beginning of adminpage_monster.incVariable:'searchFields'=(Array:(Array:'ID','ID','hidden','','','','','','','','eq'),);// SPECIAL code to be inserted to editFields & processed when showin recsVariable:'files_temp' = "[Variable:'catid'=(Field:'id')]    [Inline:-search,$dbConfig, -table=$table_prefix + 'uploads',    -KeyField='id','upl_catid'=(Field:'id')]    <A HREF=\"upl-fileedit.lasso?upl_catid=[$catid]\">    [Found_Count]</A>    [/Inline]";Variable:'categ_temp' = "[Var:'myid'=(Field:'id')][Inline:-findall,$dbConfig,      -table=$table_prefix + 'uploadcats',    -Op='eq',    'upc_parent'='',    -Sortfield='upc_name']	<select name=\"upc_parent\" size=\"1\">		<option value=\"\">-- None</option>	    [Records]	    [If: (Field:'id') != $myid]		<option value=\"[Field:'id']\"[If: $fieldvalue == 		  (Field:'id')] SELECTED[/If]>[Field:'upc_name']</option>	    [/If]	    [/Records]	</select>[/Inline]";// edit formVariable:'editFields'=(Array:(Array:'id','ID','nosave','','10','',' ','',''),(Array:'upc_name','Private Name','textarea','req','100px','3','also sorting key','',''),(Array:'upc_nicename','Public Name','textarea','','100px','3','','',''),(Array:'upc_description','Decription','textarea','','150px','3','','',''),(Array:'upc_sortorder','Sorting of Files','select','','newestfirst;oldestfirst;alphabetical;custom','Newest first;Oldest first;Alphabetical;Custom','','',''),(Array:'id','Nr. of Files','nosave','','','','','',$files_temp),(Array:'upc_parent','Parent category','override','','8','','','',$categ_temp),);// add formVariable:'addFields'=(Array:(Array:'id','ID','noentry','','10','','','',''),(Array:'upc_name','Name','text','req','15','','','',''),(Array:'upc_nicename','Nicename','text','','15','','','',''),(Array:'upc_description','Decription','textarea','','150px','3','','',''),(Array:'upc_sortorder','Sorting of Files','select','','newestfirst;oldestfirst;alphabetical;custom','Newest first;Oldest first;Alphabetical;Custom','','',''),);// define sorting for the main search inlineVariable:'sortstuff' = (Array:'-sortfield' = 'id','-sortorder' = 'descending');// constant values that will be added to each search; pair arrayVariable: 'defaultSearch' = (Array);	// buttonlist: say 'yes' or 'no' to each itemVariable:'buttonlist' = (Array:'add'='yes','update'='yes','delete'='yes');// Variable:'formTargetpage' = '';   // if target=self, comment this outVariable:'customValidations' = 'yes'; // delete validation 	// if yes, the associated include file must be in placeVariable:'customPostprocess' = 'no';		    	// if not needed, comment this outInclude:'../gen/frame_admin.inc';?>