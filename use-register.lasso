<?LassoScript //>Variable:'fromMetoRoot' = '';Include:'config.lasso';Library:'inc/library.inc';Variable:'myStylesheet' = 'admin/admin.css';Variable:'myInc' = 'inc/';Variable:'myImages' = 'images/';// get user levelVariable:'userInfo' = LB_Userinfo;Variable:'use_level' = $userInfo -> LB_getUse_level;// init the basic options datatypeVariable:'basicOptions' = LB_basicOptions;    If: (LB_getOption:'users_can_register') != 1;	var:'speakBubble' = 'Registration for this blog is not allowed.';	Include: $myinc + 'speakBubble.inc';	abort;    /if;// some values here override those in config.lassoVariable:'contents'='gen/adminpage_monster.inc';Variable:'page_title'=(str:'Registration');Variable:'pageSecuritylevel' = 0; Variable:'rectype_en' = 'user';Variable:'rectype_en_part' = 'users';Variable:'rectype_fi' = 'käyttäjä';Variable:'rectype_fi_part' = 'käyttäjiä';Variable:'menu'='inc/adminmenu.lasso';Variable:'header'='';Variable:'footer'='';Variable:'myTable'='users';// for how to use $searchFields and $editFields, // see the beginning of adminpage_monster.inc// search formVariable:'searchFields'=(Array:(Array:'id','ID','hidden','','','','','',''));// edit formVariable:'editFields'=(Array:(Array:'use_login','Login Name','text','req;unique','10','','Must be unique','','',''),(Array:'use_pass','Password','saveIfNotEmpty','custom','10','','Not visible, but can be changed','','','','md5'),(Array:'use_level','Level','select','req','10;9;8;7;6;5;4;3;2;1;0','10 can do anything;9;8 can edit users and options;7;6;5 can edit categories and links;4;3;2 can write;1;0','Every writer may edit his/her own messages and those of lower-level users','',''),// posts?(Array:'use_registered','Registered','creationdate','','','','','date',''),(Array:'use_firstname','First Name','text','','','','','',''),(Array:'use_lastname','Last Name','text','','','','','',''),(Array:'use_nickname','Public Name','text','req;unique','','','Must be unique','',''),(Array:'use_email','Email','text','','','','','',''),(Array:'use_url','Website','text','','','','Without "http://"','',''),(Array:'use_icq','ICQ','text','','','','Integer field','',''),(Array:'use_aim','AIM','text','','','','','',''),(Array:'use_msn','MSN','text','','','','','',''),(Array:'use_yim','Yahoo','text','','','','','',''),(Array:'use_description','Description','textarea','','','','','',''),);// add formVariable:'addFields'=(Array:(Array:'id','','nosave','','10','',(str:'Fill in to register. ') + (str:'Fields marked with asterisk (*) are required'),'',''),(Array:'use_login',(str:'Login Name'),'text','req;unique','10','','','','',''),(Array:'use_pass',(str:'Password'),'text','req;unique','10','','','','','','','md5'),(Array:'use_level',(str:'User Level'),'override','','10','',(LB_getOption:'new_users_can_blog'),'','<input type="hidden" name="use_level" value="' + (LB_getOption:'new_users_can_blog') + '">'),(Array:'use_firstname',(str:'First Name'),'text','','','','','',''),(Array:'use_lastname',(str:'Last Name'),'text','','','','','',''),(Array:'use_nickname',(str:'Public Name'),'text','req;unique','','',(str:'May be your real name, or a nickname'),'',''),(Array:'use_email','Email','text','','','','','',''),(Array:'use_url',(str:'Website'),'text','','','',(str:'Without the "http://"'),'',''),(Array:'use_icq','ICQ','text','','','',(str:'Integer field'),'',''),(Array:'use_aim','AIM','text','','','','','',''),(Array:'use_msn','MSN','text','','','','','',''),(Array:'use_yim','Yahoo','text','','','','','',''),(Array:'use_description',(str:'Description'),'textarea','','40','3','','',''),);// define sorting for the main search inlineVariable:'sortstuff' = (Array:-sortfield = 'use_nickname',-sortorder = 'descending');Variable:'publicPage'=''; // don't comment out (yet)Variable:'viewtype' = 'formview'; // formview, listviewVariable:'maxrecords_formview' = 1;   Variable:'maxrecords_listview' = 25;   /*   FROM THIS POINT DOWN needs rarely to be edited   */Variable:'dbtype' = 'mysql';   // fmp, mysql (vaikuttaa pvm-käsittelyynVariable:'updatebehavior' = 1;   // 1 or 2 (see below)// behavior #1: search kept, updated rec shown only if search allows this// 		(keyvalue nulled after update)//		(good for listview)// behavior #2: search bypassed, only updated rec shown// 		(keyvalue kept, hakulomake emptied)//		(sopii formview-näkymään)Variable:'searchBehavior' = 1;   // 1 or 2 (see below)// searchBehavior #1: if searchform is empty, then find all// searchBehavior #2: if searchform is empty, then find nothingVariable:'action' = '';Variable:'speakBubble' = '';Variable:'keyvalue'=(Action_Param:'keyvalue');Variable:'skip'=(Action_Param:'skip');Variable:'haku'=(Action_Param:'haku');Variable:'size1default'='40'; // default (text: size, textarea: cols)Variable:'size2default'='4';  // default (textarea: rows)Variable:'defaultClass'='pieni'; // normaalisti "pieni" // userlevel adjustments// constant values that will be added to each search; pair arrayVariable: 'defaultSearch' = (Array:'id'='x');	Variable:'buttonlist' = (Array:'add'='yes','update'='no','delete'='no');Variable:'formTargetpage' = 'use-registered.lasso'; // this var is not required// check if registered// If: $use_level > 0;//     Variable:'speakBubble' = 'You are already registered';//     Include: $myInc + '/speakBubble.inc';//     Abort;// /If;Variable:'userlevel_ses' = 0; // cheatVar:'searchValidations'='yes';Variable:'customValidations' = 'no'; 	// if yes, the associated include file must be in placeVariable:'customPostprocess' = 'no';		    	// if not needed, comment this outInclude:'gen/frame_default.inc';?>